# Internationalization

## Locale setup
- **Supported locales**: `en` (default), `ru`, `es`, `tr`, `hi` as declared in `lib/i18n.ts`.
- **Namespaces**: JSON files under `locales/<locale>/` (e.g., `common.json`, `navigation.json`, `calculators/ui.json`, `legacy/ui.json`). Nested namespaces use folder paths (e.g., `seo/calculators.json`).
- **Per-item content**: Calculator/standard/learn body copy lives in `locales/<locale>/(calculators|standards|learn)/items/<slug>.json`.

## Loading and fallback
- `loadNamespaces(locale, namespaces)` dynamically imports namespaces, deep-merges them, caches on the server, and falls back to English if a namespace is missing.
- `loadCalculatorContent` / `loadStandardContent` / `loadArticleContent` attempt the requested locale first, then default to English while returning the `contentLocale` used for UI badges.
- Missing translations return keys via `createT` to make gaps obvious in development.

## Adding translations safely
1. **Add locale code** to `lib/i18n.ts` (`locales` array and `localeNames`).
2. **Copy namespace files** from English as a template. Preserve keys and structure; avoid deleting existing keys.
3. **Translate item files** under `locales/<locale>/calculators/items/`, `.../standards/items/`, and `.../learn/items/`. Keep required fields (how-to lists, >=3 examples, >=10 FAQ).
4. **Validate** with `npm run i18n:validate` to flag missing/extra keys and oversized files.
5. **Fallback badge**: If some content is only available in English, the UI shows "Content in English" using `contentLocale`; avoid claiming full localization until all files exist.

## File structure
```
locales/
  en/
    common.json
    navigation.json
    calculators/
      ui.json
      items/<slug>.json
    standards/
      ui.json
      items/<slug>.json
    learn/
      ui.json
      items/<slug>.json
    seo/
      calculators.json
      learn.json
      standards.json
  <locale>/
    ...mirrors en with translated values...
```

## Validation tools
- `npm run i18n:validate`: checks namespace parity, existence of calculator item files, and file sizes.
- `npm run i18n:ensure-en`: ensures English item files exist; helpful before adding translations.
- Logging in `loadNamespaces` and `createT` surfaces missing keys during development.
